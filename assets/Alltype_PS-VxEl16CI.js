import{r as d,j as r,H as _,S as f,g as x,L as h}from"./react-vendor--DFuVGsQ.js";/* empty css                */import{A as p}from"./AllTypeCards-Bq4mbWPE.js";import{P as b}from"./Pagination-B3V9EWHJ.js";import{A as w,P as A,N as B}from"./swiper-N-f5SBSU.js";import{P as N}from"./products-qJnBaAV8.js";import"./vendor-DLEfv8Se.js";import"./user-DklLvm-U.js";const v=""+new URL("Alltype_PS_banner01-Bc3WwUd5.webp",import.meta.url).href,I=""+new URL("Alltype_PS_banner02-CxGMZ0Gl.avif",import.meta.url).href,C=""+new URL("Alltype_PS_banner03-B7H7cIoY.avif",import.meta.url).href,T=t=>{var l,n,s,i;return(i=(s=(n=(l=t==null?void 0:t.id)!=null?l:t==null?void 0:t.slug)!=null?n:t==null?void 0:t.productId)!=null?s:t==null?void 0:t.pid)!=null?i:null},y=["全部","主機","遊戲","配件"],L=t=>{var n,s,i,u,o,c,m;return{id:T(t),image:Array.isArray(t.mainImage)?t.mainImage[0]:t.mainImage,category:t.category,title:t.productTitle,seller:t.sellerName||"",priceNow:(u=(i=(s=(n=t.salePrice)!=null?n:t.originalPrice)==null?void 0:s.toString)==null?void 0:i.call(s))!=null?u:"",priceOld:t.salePrice!=null?(m=(c=(o=t.originalPrice)==null?void 0:o.toString)==null?void 0:c.call(o))!=null?m:"":void 0,size:"medium"}},$=()=>{const t=d.useMemo(()=>{const e=N.filter(g=>g.platform==="PS").map(L),a=e.filter(g=>!g.id);return a.length&&console.warn("[Alltype_PS] 有商品缺少 id：",a),e.filter(g=>!!g.id)},[]),[l,n]=d.useState(1),s=12,[i,u]=d.useState("全部"),o=d.useMemo(()=>t.reduce((e,a)=>(e.全部++,y.includes(a.category)&&(e[a.category]=(e[a.category]||0)+1),e),{全部:0,主機:0,遊戲:0,配件:0}),[t]),c=d.useMemo(()=>i==="全部"?t:t.filter(e=>e.category===i),[i,t]),m=Math.ceil(c.length/s),P=d.useMemo(()=>{const e=(l-1)*s,a=e+s;return c.slice(e,a)},[c,l]),j=e=>{var a;n(e),(a=document.querySelector(".B_item"))==null||a.scrollIntoView({behavior:"smooth"})},S=e=>{u(e),n(1)};return r.jsxs(r.Fragment,{children:[r.jsxs(_,{children:[r.jsx("title",{children:"遊玩人間市集 ｜ PS "}),r.jsx("meta",{name:"description",content:"歡迎來到遊玩人間市集，探索各式二手遊戲商品。"})]}),r.jsxs("div",{className:"B_content",children:[r.jsx("div",{className:"B_banner",children:r.jsxs(f,{spaceBetween:30,centeredSlides:!0,autoplay:{delay:2500,disableOnInteraction:!1},pagination:{clickable:!0},navigation:!0,modules:[w,A,B],className:"mySwiper",children:[r.jsx(x,{children:r.jsx("img",{src:v,alt:"活動橫幅（banner 橫幅）"})}),r.jsx(x,{children:r.jsx("img",{src:I,alt:"活動橫幅（banner 橫幅）"})}),r.jsx(x,{children:r.jsx("img",{src:C,alt:"活動橫幅（banner 橫幅）"})})]})}),r.jsxs("div",{className:"B_itemTitles",children:[r.jsx(h,{className:"B_itemTitle",to:"/Alltype",children:"Switch"}),r.jsx("p",{className:"B_name",children:"PS系列"}),r.jsx(h,{className:"B_itemTitle",to:"/Alltype_Xbox",children:"Xbox"})]}),r.jsx("div",{className:"B_category",role:"tablist","aria-label":"商品分類（category 分類）",children:y.map(e=>{var a;return r.jsxs("button",{className:`B_Categories ${i===e?"is-active":""}`,type:"button",role:"tab","aria-selected":i===e,onClick:()=>S(e),children:[e,"(",(a=o[e])!=null?a:0,")"]},e)})}),r.jsx("div",{className:"B_item",children:P.map(e=>r.jsx(p,{id:e.id,image:e.image,category:e.category,title:e.title,seller:e.seller,priceNow:e.priceNow,priceOld:e.priceOld,size:"medium",linkTo:`/product/${encodeURIComponent(e.id)}`,wrapperClass:"B_cardLink",ariaLabel:e.title},e.id))}),m>1&&r.jsx(b,{totalPages:m,onPageChange:j,currentPage:l})]})]})};export{$ as default};
