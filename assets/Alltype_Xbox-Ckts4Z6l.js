import{r as d,j as r,H as f,S as b,g as x,L as h}from"./react-vendor--DFuVGsQ.js";/* empty css                 */import{A as p}from"./AllTypeCards-Bq4mbWPE.js";import{P as S}from"./Pagination-B3V9EWHJ.js";import{A as N,P as A,N as B}from"./swiper-N-f5SBSU.js";import{P as v}from"./products-qJnBaAV8.js";import"./vendor-DLEfv8Se.js";import"./user-DklLvm-U.js";const w=""+new URL("Alltype_Xbox_banner01-BHQoPPhq.avif",import.meta.url).href,I=""+new URL("Alltype_Xbox_banner04-DuODmEVd.avif",import.meta.url).href,C=t=>{var l,n,i,s;return(s=(i=(n=(l=t==null?void 0:t.id)!=null?l:t==null?void 0:t.slug)!=null?n:t==null?void 0:t.productId)!=null?i:t==null?void 0:t.pid)!=null?s:null},y=["全部","主機","遊戲","配件"],T=t=>{var n,i,s,u,o,c,m;return{id:C(t),image:Array.isArray(t.mainImage)?t.mainImage[0]:t.mainImage,category:t.category,title:t.productTitle,seller:t.sellerName||"",priceNow:(u=(s=(i=(n=t.salePrice)!=null?n:t.originalPrice)==null?void 0:i.toString)==null?void 0:s.call(i))!=null?u:"",priceOld:t.salePrice!=null?(m=(c=(o=t.originalPrice)==null?void 0:o.toString)==null?void 0:c.call(o))!=null?m:"":void 0,size:"medium"}},D=()=>{const t=d.useMemo(()=>{const e=v.filter(g=>g.platform==="Xbox").map(T),a=e.filter(g=>!g.id);return a.length&&console.warn("[Alltype_Xbox] 有商品缺少 id：",a),e.filter(g=>!!g.id)},[]),[l,n]=d.useState(1),i=12,[s,u]=d.useState("全部"),o=d.useMemo(()=>t.reduce((e,a)=>(e.全部++,y.includes(a.category)&&(e[a.category]=(e[a.category]||0)+1),e),{全部:0,主機:0,遊戲:0,配件:0}),[t]),c=d.useMemo(()=>s==="全部"?t:t.filter(e=>e.category===s),[s,t]),m=Math.ceil(c.length/i),j=d.useMemo(()=>{const e=(l-1)*i,a=e+i;return c.slice(e,a)},[c,l]),P=e=>{var a;n(e),(a=document.querySelector(".B_item"))==null||a.scrollIntoView({behavior:"smooth"})},_=e=>{u(e),n(1)};return r.jsxs(r.Fragment,{children:[r.jsxs(f,{children:[r.jsx("title",{children:"遊玩人間市集 ｜ Xbox "}),r.jsx("meta",{name:"description",content:"歡迎來到遊玩人間市集，探索各式二手遊戲商品。"})]}),r.jsxs("div",{className:"B_content",children:[r.jsx("div",{className:"B_banner",children:r.jsxs(b,{spaceBetween:30,centeredSlides:!0,autoplay:{delay:2500,disableOnInteraction:!1},pagination:{clickable:!0},navigation:!0,modules:[N,A,B],className:"mySwiper",children:[r.jsx(x,{children:r.jsx("img",{src:w,alt:"活動橫幅（banner 橫幅）"})}),r.jsx(x,{children:r.jsx("img",{src:I,alt:"活動橫幅（banner 橫幅）"})})]})}),r.jsxs("div",{className:"B_itemTitles",children:[r.jsx(h,{className:"B_itemTitle",to:"/Alltype",children:"Switch"}),r.jsx("p",{className:"B_name",children:"Xbox"}),r.jsx(h,{className:"B_itemTitle",to:"/Alltype_PS",children:"PS系列"})]}),r.jsx("div",{className:"B_category",role:"tablist","aria-label":"商品分類（category 分類）",children:y.map(e=>{var a;return r.jsxs("button",{className:`B_Categories ${s===e?"is-active":""}`,type:"button",role:"tab","aria-selected":s===e,onClick:()=>_(e),children:[e,"(",(a=o[e])!=null?a:0,")"]},e)})}),r.jsx("div",{className:"B_item",children:j.map(e=>r.jsx(p,{id:e.id,image:e.image,category:e.category,title:e.title,seller:e.seller,priceNow:e.priceNow,priceOld:e.priceOld,size:"medium",linkTo:`/product/${encodeURIComponent(e.id)}`,wrapperClass:"B_cardLink",ariaLabel:e.title},e.id))}),m>1&&r.jsx(S,{totalPages:m,onPageChange:P,currentPage:l})]})]})};export{D as default};
