import{r as i,j as e,H as _}from"./react-vendor-B8p8u1OW.js";import{S as J}from"./Sidebar-X_LjLwEj.js";import{P as y}from"./Pagination-BtkJimoQ.js";function S({onSubmit:m}){const[c,u]=i.useState(0),[x,l]=i.useState(0),[p,j]=i.useState(""),[a,o]=i.useState([]),n=i.useRef(null),d=i.useRef([]);i.useEffect(()=>()=>{d.current.forEach(s=>URL.revokeObjectURL(s.url))},[]);const v=()=>{m&&m(c)};return e.jsx("div",{children:e.jsx("div",{className:"J_reviewcard",children:e.jsxs("div",{className:"J_reviewSection",children:[e.jsx("div",{className:"J_reviewCardContent",children:e.jsxs("div",{className:"J_reviewform",children:[e.jsxs("div",{className:"J_stars",onMouseLeave:()=>{c===0&&l(0)},children:[e.jsx("span",{children:"評價"}),[1,2,3,4,5].map(s=>{const r=x?s<=x:s<=c,h=r?"#F2D015":"#DDDDDD";return e.jsx("button",{type:"button","aria-label":`${s} 星`,onMouseEnter:()=>{c===0&&l(s)},onClick:()=>{u(s),l(0)},onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),u(s),l(0))},className:"J_star-btn",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31",height:"29",viewBox:"0 0 31 29",fill:"none",children:e.jsx("path",{d:"M14.5489 0.927048C14.8483 0.0057373 16.1517 0.00573993 16.4511 0.927051L19.2045 9.40122C19.3384 9.81324 19.7223 10.0922 20.1555 10.0922L29.0658 10.0922C30.0345 10.0922 30.4373 11.3318 29.6536 11.9012L22.445 17.1385C22.0945 17.3932 21.9479 17.8446 22.0818 18.2566L24.8352 26.7308C25.1345 27.6521 24.0801 28.4182 23.2963 27.8488L16.0878 22.6115C15.7373 22.3568 15.2627 22.3568 14.9122 22.6115L7.70365 27.8488C6.91994 28.4182 5.86546 27.6521 6.16481 26.7307L8.91824 18.2566C9.05211 17.8446 8.90545 17.3932 8.55497 17.1385L1.34641 11.9012C0.562692 11.3318 0.96547 10.0922 1.93419 10.0922L10.8445 10.0922C11.2777 10.0922 11.6616 9.81324 11.7955 9.40122L14.5489 0.927048Z",fill:h,fillOpacity:r?.83:1})})},s)})]}),e.jsx("textarea",{placeholder:"商品符合照片描述，且問問題賣家都很詳細說明，推推!",value:p,onChange:s=>j(s.target.value)}),e.jsxs("div",{className:"J_imageUpload",children:[e.jsx("input",{ref:n,style:{display:"none"},type:"file",accept:"image/*",multiple:!0,onChange:s=>{const r=Array.from(s.target.files||[]),t=9-(d.current.length||0);if(t<=0){alert("最多只能上傳 9 張照片"),s.target.value=null;return}const C=r.slice(0,t).map(g=>({file:g,url:URL.createObjectURL(g)}));o(g=>{const b=[...g,...C];return d.current=b,b}),r.length>t&&alert(`已達上限 9 張，僅上傳前 ${t} 張`),s.target.value=null}}),e.jsx("button",{type:"button",onClick:()=>{var s;return(s=n.current)==null?void 0:s.click()},className:"J_uploadBtn",children:"上傳商品照"}),e.jsx("div",{className:"J_uploadMeta",children:e.jsxs("span",{className:"J_uploadCount",children:["已上傳 ",a.length," / 9"]})}),a.length>0&&e.jsx("div",{className:"J_imagePreviews",children:a.map((s,r)=>e.jsxs("div",{className:"J_previewItem",children:[e.jsx("img",{src:s.url,alt:`preview-${r}`}),e.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(s.url),o(h=>{const t=h.filter((w,C)=>C!==r);return d.current=t,t})},children:"移除照片"})]},r))})]})]})}),e.jsx("div",{className:"J_reviweBtn",children:e.jsx("button",{onClick:v,children:"確定送出"})})]})})})}function k({id:m,shop:c,title:u,price:x,date:l,status:p,img:j}){const[a,o]=i.useState(!1),[n,d]=i.useState(!1),[v,s]=i.useState(!1),[r,h]=i.useState(!1);return i.useEffect(()=>{if(r||a){const w=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=w}}},[r,a]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"J_ordercard",children:[e.jsxs("div",{className:"J_ordercardLeft",children:[e.jsx("h2",{children:c}),e.jsx("img",{src:j,alt:u})]}),e.jsxs("div",{className:"J_details",children:[e.jsxs("div",{className:"J_status",children:[e.jsx("p",{}),e.jsxs("p",{children:[" ",p]})]}),e.jsxs("p",{children:[" ",m]}),e.jsxs("div",{className:"J_detailsflex",children:[e.jsx("h4",{children:u}),e.jsxs("p",{children:["結帳金額: $",x]})]}),e.jsxs("div",{className:"J_detailsflex2",children:[e.jsxs("p",{children:["下單日期: ",l]}),p==="已完成"&&e.jsxs("div",{className:"J_order-actions",style:{position:"relative"},children:[e.jsx("button",{className:"J_RB1",type:"button",onClick:()=>{n||(d(!0),h(!0))},style:{visibility:n?"hidden":"visible",pointerEvents:n?"none":"auto"},"aria-hidden":n,children:e.jsxs("span",{className:"J_checkoutContent",children:[e.jsx("span",{className:"J_Checkout",children:"確認收貨"}),e.jsx("svg",{className:"J_triangle",xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 8 8",fill:"none",children:e.jsx("path",{d:"M7.5 4L0.75 7.89711V0.102886L7.5 4Z",fill:"white"})})]})}),e.jsx("button",{className:`J_RB2${v?" is-reviewed":""}`,type:"button",onClick:()=>{v||o(t=>!t)},"aria-pressed":a,children:e.jsxs("span",{className:"J_checkoutContent",children:[e.jsx("span",{className:"J_Checkout",children:v?"已完成評價":"給評"}),e.jsx("svg",{className:`J_triangle${a?" is-open":""}`,xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 8 8",fill:"none",children:e.jsx("path",{d:"M7.5 4L0.75 7.89711V0.102886L7.5 4Z",fill:"white"})})]})})]})]})]})]}),r&&e.jsxs("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)"},onClick:()=>h(!1)}),e.jsxs("div",{style:{background:"#fff",padding:20,borderRadius:8,zIndex:1e4,minWidth:260,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[e.jsx("p",{style:{marginBottom:12},children:"已確認收貨"}),e.jsx("button",{type:"button",onMouseDown:t=>t.preventDefault(),onClick:()=>h(!1),"aria-label":"關閉已確認收貨視窗",style:{background:"#DE1A10",color:"#fff",border:"none",padding:"8px 12px",borderRadius:6,display:"inline-block",margin:0,cursor:"pointer",outline:"none",WebkitTapHighlightColor:"transparent"},children:"關閉"})]})]}),a&&e.jsx("div",{className:"J_modal-overlay is-open",onClick:()=>o(!1),children:e.jsx("div",{className:"J_modal-content",onClick:t=>t.stopPropagation(),children:e.jsx(S,{onSubmit:()=>{o(!1),s(!0)}})})})]})}const f=""+new URL("orderImg1-CdKSOcwS.svg",import.meta.url).href,N=[{id:"C2025080501",shop:"@GAME_1318",title:"附硬殼包+玻璃貼+TPU材質透明殼【Switch2主機 NS2主機】",date:"2025-08-05",price:999,status:"未出貨",img:f},{id:"C2025080501",shop:"@GAME_1318",title:"附硬殼包+玻璃貼+TPU材質透明殼【Switch2主機 NS2主機】",price:999,date:"2025-08-05",status:"未出貨",img:f},{id:"C2025080501",shop:"@GAME_1318",title:"附硬殼包+玻璃貼+TPU材質透明殼【Switch2主機 NS2主機】",price:999,date:"2025-08-05",status:"已完成",img:f},{id:"C2025080501",shop:"@GAME_1318",title:"附硬殼包+玻璃貼+TPU材質透明殼【Switch2主機 NS2主機】",date:"2025-08-05",price:999,status:"未出貨",img:f},{id:"C2025080501",shop:"@GAME_1318",title:"附硬殼包+玻璃貼+TPU材質透明殼【Switch2主機 NS2主機】",date:"2025-08-05",price:999,status:"未出貨",img:f}],L=["訂單摘要","未出貨","已到貨","完成訂單","商品退換"],E=()=>{const[m,c]=i.useState("訂單摘要"),[u,x]=i.useState(1),l=3,p=Math.max(1,Math.ceil(N.length/l)),j=n=>{x(n)},a=(u-1)*l,o=N.slice(a,a+l);return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsx("title",{children:"遊玩人間市集 ｜ 我的訂單"}),e.jsx("meta",{name:"description",content:"歡迎來到遊玩人間市集，探索各式二手遊戲商品。"})]}),e.jsxs("main",{className:"J_content",children:[e.jsx(J,{}),e.jsxs("div",{className:"J_layout",children:[e.jsx("div",{className:"J_ordertabs",children:L.map(n=>e.jsx("button",{className:n===m?"active":"",onClick:()=>c(n),children:n},n))}),e.jsx("div",{className:"J_orders",children:o.map((n,d)=>e.jsx(k,{...n},`${n.id}-${a+d}`))}),e.jsx("div",{className:"J_pagination",children:e.jsx(y,{totalPages:p,onPageChange:j})})]})]})]})};export{E as default};
