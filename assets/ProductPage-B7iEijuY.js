import{r as h,j as s,S as q,g as S,L as g,h as T}from"./react-vendor--DFuVGsQ.js";import{P as D}from"./swiper-N-f5SBSU.js";import{a as C,G as P,S as k,b as w,W as L,g as R}from"./products-qJnBaAV8.js";import{s as f,q as A,f as F,c as M}from"./Star-C42fQbba.js";import{f as E}from"./user-DklLvm-U.js";import{D as B,c as O,p as W,S as G}from"./index-BC6BtxKR.js";import"./vendor-DLEfv8Se.js";const U=({mainImage:t=[],productTitle:a="",productMeta:e="",originalPrice:m,salePrice:o,productStatus:x,st:d={}})=>{var l;const u=(t||[]).slice(0,4).map((r,p)=>({src:r,alt:`商品大圖 ${p+1}`})),[_,N]=h.useState(0),[v,c]=h.useState(!1);let j=null,i=d.status||"商品狀態";if(typeof x=="string"){const r=(l=C)==null?void 0:l[x];j=(r==null?void 0:r.image)||null,i=(r==null?void 0:r.label)||i}else x&&typeof x=="object"&&(j=x.icon||null,i=x.label||i);const b=s.jsx("div",{className:"product-price",children:o!=null?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"original-price",children:["NTD$",Number(m).toLocaleString()]}),s.jsxs("span",{className:"sale-price",children:["NTD$",Number(o).toLocaleString()]})]}):s.jsxs("span",{className:"sale-price",children:["NTD$",Number(m).toLocaleString()]})});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"product-page product-page-pc",children:[s.jsxs("div",{className:"product-gallery",children:[s.jsx("div",{className:"thumbnails",children:u.map((r,p)=>s.jsx("div",{className:`thumb ${p===_?"is-active":""}`,onMouseEnter:()=>N(p),children:s.jsx("img",{src:r.src,alt:`縮圖 ${p+1}`})},p))}),s.jsx("div",{className:"main-image",children:u[_]&&s.jsx("img",{src:u[_].src,alt:u[_].alt})})]}),s.jsxs("div",{className:"product-detail",children:[s.jsxs("div",{className:"product-main",children:[s.jsx("h1",{className:"product-title",children:a}),s.jsxs("div",{className:"product-mainInfo",children:[s.jsxs("p",{className:"product-meta",children:["上架日期：",(e||"").replaceAll("-",".")]}),b]})]}),s.jsxs("div",{className:"product-actions",children:[s.jsx("button",{className:`btn-fav ${v?"active":""}`,onClick:()=>c(!v),"aria-label":"加入收藏",children:s.jsx("span",{className:"heart"})}),s.jsx("button",{className:"btn-cart btn",children:"加入購物車"}),s.jsx("button",{className:"btn-buy btn",children:"直接購買"})]}),j&&s.jsx("div",{className:"product-status",children:s.jsx("img",{src:j,alt:i})}),s.jsxs("div",{className:"product-description",children:[s.jsx("h2",{children:"商品說明"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"商品狀態："}),d.status||"-"]}),s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"其他備註："}),d.note||"-"]}),s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"商品位置："}),d.location||"-"]}),s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"運送服務："}),d.shipping||"-"]}),s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"付款方式："}),d.payment||"-"]})]})]})]})]}),s.jsxs("div",{className:"product-page product-page-mobile",children:[s.jsx("div",{className:"carousel",children:s.jsx(q,{modules:[D],pagination:{type:"fraction"},style:{width:"100%",height:"100%"},children:u.map((r,p)=>s.jsx(S,{children:s.jsx("img",{src:r.src,alt:r.alt,style:{width:"100%",height:"100%",objectFit:"cover"}})},p))})}),s.jsxs("div",{className:"detail_mobile",children:[s.jsx("div",{className:"mobile_title",children:a}),s.jsxs("div",{className:"mobile_infor",children:[s.jsxs("div",{className:"mobile_price",children:[s.jsx("p",{className:"new_price",children:o!=null?`NTD$${Number(o).toLocaleString()}`:`NTD$${Number(m).toLocaleString()}`}),o!=null&&s.jsxs("p",{className:"old_price",children:["NTD$",Number(m).toLocaleString()]})]}),s.jsxs("div",{className:"mobile_date",children:["上架日期：",(e||"").replaceAll("-",".")]})]}),s.jsxs("div",{className:"mobile_description",children:[s.jsxs("div",{className:"md",children:[s.jsx("h2",{children:"商品說明"}),j&&s.jsx("img",{src:j,alt:i,className:"mobile_status"})]}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"商品狀態："}),d.status||"-"]}),s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"其他備註："}),d.note||"-"]}),s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"商品位置："}),d.location||"-"]}),s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"運送服務："}),d.shipping||"-"]}),s.jsxs("li",{children:[s.jsx("p",{className:"st",children:"付款方式："}),d.payment||"-"]})]})]})]})]})]})},y={check:M,fastShip:F,quickReply:A},z=({sellerAvatar:t,sellerName:a,sellerScore:e,sellerCount:m,sellerLocation:o,sellerTags:x=[],sellerDesc:d})=>{var _,N,v,c;const u=t||E;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"seller seller-pc",children:[s.jsxs("div",{className:"seller__profile",children:[s.jsx("img",{src:u,alt:"賣家頭像",className:"seller__avatar"}),s.jsx("p",{className:"seller__name",children:a})]}),s.jsxs("div",{className:"seller__rwd",children:[s.jsxs("div",{className:"seller__stats",children:[s.jsxs("div",{className:"seller__rating",children:[s.jsx("span",{className:"seller__score",children:(N=(_=e==null?void 0:e.toFixed)==null?void 0:_.call(e,1))!=null?N:e}),s.jsx("img",{src:f,alt:"評分星等"}),s.jsxs("span",{className:"seller__count",children:["(",m,"則評價)"]})]}),s.jsx("p",{className:"seller__location",children:o}),s.jsx("div",{className:"seller__tags",children:x.map(j=>{const i=y[j];return i?s.jsx("img",{src:i,alt:j},j):null})})]}),s.jsx("div",{className:"seller__desc",children:s.jsx("p",{children:d})})]}),s.jsxs("div",{className:"seller__actions",children:[s.jsx("button",{className:"btn",children:"追蹤+"}),s.jsx("button",{className:"btn",children:"聊聊"})]})]}),s.jsxs("div",{className:"seller seller-mobile",children:[s.jsx("img",{src:u,alt:"賣家頭像",className:"seller__avatar"}),s.jsxs("div",{className:"scenter",children:[s.jsx("p",{className:"seller__name",children:a}),s.jsxs("div",{className:"seller__rating",children:[s.jsx("span",{className:"seller__score",children:(c=(v=e==null?void 0:e.toFixed)==null?void 0:v.call(e,1))!=null?c:e}),s.jsx("img",{src:f,alt:"評分星等"}),s.jsxs("span",{className:"seller__count",children:["(",m,"則評價)"]})]}),s.jsx("div",{className:"seller__tags",children:x.map(j=>{const i=y[j];return i?s.jsx("img",{src:i,alt:j},j):null})})]}),s.jsxs("div",{className:"seller__actions",children:[s.jsx("button",{className:"btn",children:"追蹤+"}),s.jsx("button",{className:"btn",children:"聊聊"})]})]})]})},H=({detailContent:t=""})=>s.jsxs("div",{className:"detail",children:[s.jsx("div",{className:"detail_title",children:"商品詳細說明"}),s.jsx("div",{className:"detail_content",children:t||"—"})]}),n=(t,a)=>Math.floor(Math.random()*(a-t+1))+t,J=()=>{const t="23456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz";return t[n(0,t.length-1)]},I=(t=5)=>Array.from({length:t},J).join("");function K({length:t=5,width:a=120,height:e=40,onChange:m}){const o=h.useRef(null),[x,d]=h.useState(I(t)),u=h.useCallback(N=>{const v=o.current;if(!v)return;const c=v.getContext("2d");c.clearRect(0,0,a,e),c.fillStyle="#f3f4f6",c.fillRect(0,0,a,e);for(let i=0;i<30;i++)c.fillStyle=`rgba(${n(0,255)}, ${n(0,255)}, ${n(0,255)}, 0.6)`,c.fillRect(n(0,a),n(0,e),1,1);for(let i=0;i<3;i++)c.strokeStyle=`rgba(${n(0,255)}, ${n(0,255)}, ${n(0,255)}, 0.7)`,c.lineWidth=n(1,2),c.beginPath(),c.moveTo(n(0,a/3),n(0,e)),c.bezierCurveTo(n(0,a),n(0,e),n(0,a),n(0,e),n(a/2,a),n(0,e)),c.stroke();const j=a/(N.length+1);for(let i=0;i<N.length;i++){const b=N[i],l=n(18,24);c.font=`${l}px ui-monospace, SFMono-Regular, Menlo, monospace`,c.fillStyle=`rgb(${n(30,120)}, ${n(30,120)}, ${n(30,120)})`;const r=j*(i+1),p=n(e*.6,e*.8),$=n(-25,25)*Math.PI/180;c.save(),c.translate(r,p),c.rotate($),c.fillText(b,0,0),c.restore()}},[a,e]),_=h.useCallback(()=>{const N=I(t);d(N),m==null||m(N)},[t,m]);return h.useEffect(()=>{u(x)},[x,u]),h.useEffect(()=>{m==null||m(x)},[]),s.jsxs("div",{className:"captcha",children:[s.jsx("canvas",{ref:o,width:a,height:e,"aria-label":"驗證碼（captcha，驗證使用者是否為人類）圖片",role:"img"}),s.jsx("button",{type:"button",className:"captcha__refresh",onClick:_,"aria-label":"重整驗證碼",children:"↻"})]})}const Q=({productId:t,initialQa:a=[]})=>{const[e,m]=h.useState(""),[o,x]=h.useState(""),[d,u]=h.useState(""),[_,N]=h.useState(""),v=h.useMemo(()=>`qa:${t||"default"}`,[t]),[c,j]=h.useState(()=>{try{const l=localStorage.getItem(v);return l?JSON.parse(l):a}catch(l){return a}});h.useEffect(()=>{try{localStorage.setItem(v,JSON.stringify(c))}catch(l){}},[c,v]);const i=()=>{const l=new Date,r=p=>String(p).padStart(2,"0");return`${l.getFullYear()}.${r(l.getMonth()+1)}.${r(l.getDate())} ${r(l.getHours())}:${r(l.getMinutes())}:${r(l.getSeconds())}`},b=l=>{if(l.preventDefault(),!_.trim()){u("請先輸入提問內容 ❌");return}if(o.trim().toLowerCase()!==e.trim().toLowerCase()){u("驗證失敗，請再試一次 ❌");return}const r={user:"@guest****",time:i(),content:_.trim()};j(p=>[r,...p]),N(""),x(""),u("驗證成功 ✅ 已送出提問")};return s.jsxs("div",{className:"qa",children:[c.length>0?c.map((l,r)=>s.jsxs("div",{className:"qa_item",children:[s.jsxs("div",{className:"qa_header",children:[s.jsxs("p",{className:"qa_number",children:["問題",c.length-r]}),s.jsx("p",{className:"qa_user",children:l.user}),s.jsxs("p",{className:"qa_time",children:["(",l.time,")"]})]}),s.jsx("div",{className:"qa_question",children:s.jsx("p",{children:l.content})}),l.answer&&s.jsxs("div",{className:"qa_answer",children:[s.jsxs("div",{className:"qa_ans",children:[s.jsx("span",{className:"qa_answer-label",children:"答覆："}),s.jsx("p",{className:"qa_answer-content",children:l.answer})]}),s.jsxs("p",{className:"qa_time",children:["(",l.answerTime,")"]})]})]},r)):s.jsx("p",{className:"qa_empty",children:"目前還沒有提問，成為第一個提問的人吧！"}),s.jsxs("form",{className:"qa_ask",onSubmit:b,children:[s.jsx("p",{className:"qa_title",children:"提出問題"}),s.jsx("span",{className:"qa_policy",children:"為保障會員交易安全，留言請勿填寫個人資料、外部連結或任何導私下交易之內容，否則您送出的內容可能無法正常顯示。"}),s.jsx("textarea",{name:"askbox",className:"qa_askbox",placeholder:"(250個中文字以內)",maxLength:250,value:_,onChange:l=>N(l.target.value),required:!0}),s.jsxs("div",{className:"allCaptcha",children:[s.jsxs("div",{className:"qa__field qa__captcha",children:[s.jsx(K,{length:5,onChange:m}),s.jsx("input",{type:"text",id:"captcha",name:"captcha",className:"qa__captcha-input",inputMode:"text",autoComplete:"off",placeholder:"請輸入上方驗證碼",value:o,onChange:l=>x(l.target.value),required:!0}),d&&s.jsx("small",{className:`qa_msg ${d.includes("成功")?"ok":"err"}`,children:d})]}),s.jsx("button",{className:"qa_btn btn",type:"submit",children:"送出"})]})]})]})},Y=({userImg:t,userName:a,upDate:e,commodityImage:m,commodityTitle:o,commodityPrice:x})=>{const[d,u]=h.useState(!1);return s.jsx("div",{className:"abc",children:s.jsx("div",{className:"o1",children:s.jsxs("div",{className:"o2",children:[s.jsxs("div",{className:"cain",children:[s.jsxs(g,{to:"/Reviewpage",className:"userInfo",children:[s.jsx("div",{children:s.jsx("img",{src:t,alt:"",className:"userImg"})}),s.jsxs("div",{children:[s.jsx("p",{className:"userName",children:a}),s.jsx("p",{className:"upDate",children:e})]})]}),s.jsxs("a",{href:"",className:"commodityInfo",children:[s.jsx("div",{className:"comImg",children:s.jsx("img",{src:m,alt:""})}),s.jsx("p",{className:"comTitle",children:o}),s.jsxs("p",{className:"comPrice",children:["NT$",x]})]})]}),s.jsx("div",{className:"comHeart",children:s.jsx("button",{className:`btn-fav ${d?"active":""}`,onClick:()=>u(!d),children:s.jsx("span",{className:"heart"})})})]})})})},V=()=>{const t=[{id:1,userImg:P,userName:"paly**56",upDate:"3天前",commodityImage:B,commodityTitle:"咚奇剛蕉力全開+咚奇剛amiibo",commodityPrice:"800"},{id:2,userImg:k,userName:"Ds2CE**6",upDate:"3天前",commodityImage:O,commodityTitle:"死亡擱淺典藏版",commodityPrice:"1100"},{id:3,userImg:w,userName:"Ssp**5",upDate:"3天前",commodityImage:W,commodityTitle:"PS5 PRO主機 1TB 極致黑",commodityPrice:"9999"},{id:4,userImg:L,userName:"fun31**56",upDate:"3天前",commodityImage:G,commodityTitle:"Switch 2全新主機",commodityPrice:"5000"}];return s.jsx("div",{className:"containerPrCard",children:t.map(a=>s.jsx(Y,{userImg:a.userImg,userName:a.userName,upDate:a.upDate,commodityImage:a.commodityImage,commodityTitle:a.commodityTitle,commodityPrice:a.commodityPrice},a.id))})},X=()=>s.jsxs("div",{className:"recommend",children:[s.jsx("p",{className:"recommend_title",children:"你可能有興趣的商品"}),s.jsx(V,{}),s.jsx("div",{className:"recommend_btn",children:s.jsx("button",{className:"btn",children:"更多商品"})})]}),rs=()=>{const{id:t}=T(),a=decodeURIComponent(t||""),e=R(a);if(h.useEffect(()=>{e!=null&&e.productTitle?document.title=`${e.productTitle} ｜ 遊玩人間市集`:document.title="商品不存在 ｜ 遊玩人間市集"},[e==null?void 0:e.productTitle]),!e)return s.jsxs("div",{className:"product",children:[s.jsxs("div",{className:"breadcrumb",children:[s.jsx(g,{to:"/",children:"首頁"}),s.jsx("span",{children:"›"}),s.jsx("span",{className:"is-current",children:"找不到此商品"})]}),s.jsx("div",{className:"section",children:"很抱歉，這個商品不存在或已下架。"})]});const m=Array.isArray(e.breadcrumb)&&e.breadcrumb.length>0?e.breadcrumb:[{label:"Switch",to:"/switch"},{label:"主機",to:"/switch/console"}];return s.jsxs("div",{className:"product",children:[s.jsxs("div",{className:"breadcrumb",children:[s.jsx(g,{to:"/",children:"首頁"}),s.jsx("span",{className:"angleBracket",children:"›"}),m.map((o,x)=>s.jsxs("span",{className:"breadcrumb__item",children:[o.to?s.jsx(g,{to:o.to,children:o.label}):s.jsx("span",{children:o.label}),s.jsx("span",{className:"angleBracket",children:"›"})]},`${o.label}-${x}`)),s.jsx("span",{className:"is-current",children:e.productTitle})]}),s.jsx("section",{className:"product__info section",children:s.jsx(U,{...e})}),s.jsxs("aside",{className:"product__seller section",children:[s.jsx("div",{className:"top_decorate"}),s.jsx(z,{sellerAvatar:e.sellerAvatar,sellerName:e.sellerName,sellerScore:e.sellerScore,sellerCount:e.sellerCount,sellerLocation:e.sellerLocation,sellerTags:e.sellerTags,sellerDesc:e.sellerDesc}),s.jsx("div",{className:"down_decorate"})]}),s.jsx("section",{className:"product__detail section",children:s.jsx(H,{detailContent:e.detailContent})}),s.jsxs("section",{className:"product__qa section",children:[s.jsx("div",{className:"top_decorate2"}),s.jsx(Q,{productId:e.id,initialQa:e.qa||[]}),s.jsx("div",{className:"down_decorate2"})]}),s.jsx("section",{className:"product__recommend section",children:s.jsx(X,{items:e.recommendItems||[]})})]})};export{rs as default};
