import{u,r as l,j as s}from"./react-vendor-CToDt6bN.js";import{S as x}from"./Sidebar-DRO_zMwa.js";import{P as N}from"./index-MPD8Ytfp.js";import"./vendor-DLEfv8Se.js";import"./swiper-N-f5SBSU.js";const _=()=>{const r=u(),[i,d]=l.useState(()=>{const e=sessionStorage.getItem("notices");return e?JSON.parse(e):N.slice(0,10).map((t,a)=>{const m=a%3===0;return{id:t.id||a,text:m?`您所收藏的商品「${t.productTitle}」有價格更新！`:`您追蹤的賣場「${t.sellerName}」有新商品上架！`,date:new Date().toISOString().split("T")[0],unread:!0,disabled:!1,linkTo:`/product/${encodeURIComponent(t.id||a)}`}})});l.useEffect(()=>{sessionStorage.setItem("notices",JSON.stringify(i))},[i]);const n=e=>{const t=i.map(a=>a.id===e&&a.unread&&!a.disabled?{...a,unread:!1,disabled:!0}:a);d(t),sessionStorage.setItem("notices",JSON.stringify(t)),window.dispatchEvent(new Event("storage"))},o=()=>{const e=i.map(t=>t.unread&&!t.disabled?{...t,unread:!1,disabled:!0}:t);d(e),sessionStorage.setItem("notices",JSON.stringify(e)),window.dispatchEvent(new Event("storage"))},c=e=>{n(e.id),setTimeout(()=>{r(e.linkTo)},100)};return s.jsx(s.Fragment,{children:s.jsxs("main",{className:"c_onMain",children:[s.jsx(x,{}),s.jsx("div",{className:"c_noOutside",children:s.jsxs("div",{className:"c_noBox",children:[s.jsxs("div",{className:"c_btnBox",children:[s.jsx("h2",{children:"所有通知"}),s.jsx("button",{className:"c_allReadBtn",onClick:o,children:"全部標示為已讀"})]}),s.jsx("ul",{className:"bell__list",children:i.map(e=>s.jsxs("li",{className:`bell__item ${e.unread?"is-unread":""} ${e.disabled?"is-disabled":""}`,onClick:()=>c(e),children:[s.jsxs("div",{className:"bdt",children:[s.jsx("div",{className:"bell__dot"}),s.jsx("p",{className:"bell__text",children:e.text})]}),s.jsx("div",{className:"bd",children:s.jsx("time",{className:"bell__date",children:e.date})})]},e.id))})]})})]})})};export{_ as default};
