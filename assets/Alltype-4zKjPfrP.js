import{r as d,j as r,H as P,S,g as h,L as x}from"./react-vendor--DFuVGsQ.js";/* empty css                */import{A as _}from"./AllTypeCards-Bq4mbWPE.js";import{A as w,P as v,N}from"./swiper-N-f5SBSU.js";import{P as A}from"./Pagination-B3V9EWHJ.js";import{P as B}from"./products-qJnBaAV8.js";import"./vendor-DLEfv8Se.js";import"./user-DklLvm-U.js";const b=""+new URL("banner_pokemon-vfmWkoXl.avif",import.meta.url).href,I=""+new URL("Alltype_banner02-D2iXLrGG.avif",import.meta.url).href,C=""+new URL("Alltype_banner03-BwrycHns.avif",import.meta.url).href,T=t=>{var l,n,a,s;return(s=(a=(n=(l=t==null?void 0:t.id)!=null?l:t==null?void 0:t.slug)!=null?n:t==null?void 0:t.productId)!=null?a:t==null?void 0:t.pid)!=null?s:null},y=["全部","主機","遊戲","配件"],k=t=>{var n,a,s,u,o,c,m;return{id:T(t),image:Array.isArray(t.mainImage)?t.mainImage[0]:t.mainImage,category:t.category,title:t.productTitle,seller:t.sellerName||"",priceNow:(u=(s=(a=(n=t.salePrice)!=null?n:t.originalPrice)==null?void 0:a.toString)==null?void 0:s.call(a))!=null?u:"",priceOld:t.salePrice!=null?(m=(c=(o=t.originalPrice)==null?void 0:o.toString)==null?void 0:c.call(o))!=null?m:"":void 0,size:"medium"}},H=()=>{const t=d.useMemo(()=>{const e=B.filter(g=>g.platform==="Switch").map(k),i=e.filter(g=>!g.id);return i.length&&console.warn("[Alltype] 有商品缺少 id：",i),e.filter(g=>!!g.id)},[]),[l,n]=d.useState(1),a=12,[s,u]=d.useState("全部"),o=d.useMemo(()=>t.reduce((e,i)=>(e.全部++,y.includes(i.category)&&(e[i.category]=(e[i.category]||0)+1),e),{全部:0,主機:0,遊戲:0,配件:0}),[t]),c=d.useMemo(()=>s==="全部"?t:t.filter(e=>e.category===s),[s,t]),m=Math.ceil(c.length/a),j=d.useMemo(()=>{const e=(l-1)*a,i=e+a;return c.slice(e,i)},[c,l]),f=e=>{var i;n(e),(i=document.querySelector(".B_item"))==null||i.scrollIntoView({behavior:"smooth"})},p=e=>{u(e),n(1)};return r.jsxs(r.Fragment,{children:[r.jsxs(P,{children:[r.jsx("title",{children:"遊玩人間市集 ｜ Switch "}),r.jsx("meta",{name:"description",content:"歡迎來到遊玩人間市集，探索各式二手遊戲商品。"})]}),r.jsxs("div",{className:"B_content",children:[r.jsx("div",{className:"B_banner",children:r.jsxs(S,{spaceBetween:30,centeredSlides:!0,autoplay:{delay:2500,disableOnInteraction:!1},pagination:{clickable:!0},navigation:!0,modules:[w,v,N],className:"mySwiper",children:[r.jsx(h,{children:r.jsx("img",{src:b,alt:"活動橫幅"})}),r.jsx(h,{children:r.jsx("img",{src:I,alt:"活動橫幅"})}),r.jsx(h,{children:r.jsx("img",{src:C,alt:"活動橫幅"})})]})}),r.jsxs("div",{className:"B_itemTitles",children:[r.jsx(x,{className:"B_itemTitle",to:"/Alltype_PS",children:"PS系列"}),r.jsx("p",{className:"B_name",children:"Switch"}),r.jsx(x,{className:"B_itemTitle",to:"/Alltype_Xbox",children:"Xbox"})]}),r.jsx("div",{className:"B_category",role:"tablist","aria-label":"商品分類",children:y.map(e=>{var i;return r.jsxs("button",{className:`B_Categories ${s===e?"is-active":""}`,type:"button",role:"tab","aria-selected":s===e,onClick:()=>p(e),children:[e,"(",(i=o[e])!=null?i:0,")"]},e)})}),r.jsx("div",{className:"B_item",children:j.map(e=>r.jsx(_,{id:e.id,image:e.image,category:e.category,title:e.title,seller:e.seller,priceNow:e.priceNow,priceOld:e.priceOld,size:"medium",linkTo:`/product/${encodeURIComponent(e.id)}`,wrapperClass:"B_cardLink",ariaLabel:e.title},e.id))}),m>1&&r.jsx(A,{totalPages:m,onPageChange:f,currentPage:l})]})]})};export{H as default};
