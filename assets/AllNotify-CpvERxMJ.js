import{a as u,r as n,j as s}from"./react-vendor-CEea2Jcx.js";import{S as p}from"./Sidebar-BcqSFLDA.js";import{P as x}from"./index-CwnBu0uV.js";import"./vendor-DLEfv8Se.js";import"./swiper-N-f5SBSU.js";const S=()=>{const o=u(),[a,d]=n.useState(()=>{const e=sessionStorage.getItem("notices");return e?JSON.parse(e):x.slice(0,10).map((t,i)=>{const m=i%3===0;return{id:t.id||i,text:m?`您所收藏的商品「${t.productTitle}」有價格更新！`:`您追蹤的賣場「${t.sellerName}」有新商品上架！`,date:new Date().toISOString().split("T")[0],unread:!0,disabled:!1,linkTo:`/product/${encodeURIComponent(t.id||i)}`}})});n.useEffect(()=>{sessionStorage.setItem("notices",JSON.stringify(a))},[a]),n.useEffect(()=>{function e(){const t=JSON.parse(sessionStorage.getItem("notices")||"[]");d(t)}return window.addEventListener("notice-update",e),()=>window.removeEventListener("notice-update",e)},[]);const c=e=>{const t=a.map(i=>i.id===e&&i.unread&&!i.disabled?{...i,unread:!1,disabled:!0}:i);d(t),sessionStorage.setItem("notices",JSON.stringify(t)),window.dispatchEvent(new Event("notice-update"))},r=()=>{const e=a.map(t=>t.unread&&!t.disabled?{...t,unread:!1,disabled:!0}:t);d(e),sessionStorage.setItem("notices",JSON.stringify(e)),window.dispatchEvent(new Event("notice-update"))},l=e=>{c(e.id),setTimeout(()=>{o(e.linkTo)},100)};return s.jsx(s.Fragment,{children:s.jsxs("main",{className:"c_onMain",children:[s.jsx(p,{}),s.jsx("div",{className:"c_noOutside",children:s.jsxs("div",{className:"c_noBox",children:[s.jsxs("div",{className:"c_btnBox",children:[s.jsx("h2",{children:"所有通知"}),s.jsx("button",{className:"c_allReadBtn",onClick:r,children:"全部標示為已讀"})]}),s.jsx("ul",{className:"bell__list",children:a.map(e=>s.jsxs("li",{className:`bell__item ${e.unread?"is-unread":""} ${e.disabled?"is-disabled":""}`,onClick:()=>l(e),children:[s.jsxs("div",{className:"bdt",children:[s.jsx("div",{className:"bell__dot"}),s.jsx("p",{className:"bell__text",children:e.text})]}),s.jsx("div",{className:"bd",children:s.jsx("time",{className:"bell__date",children:e.date})})]},e.id))})]})})]})})};export{S as default};
